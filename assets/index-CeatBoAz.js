import{j as e,c as l,i as L,k as R,r as d,Q as j,w as v,a as h}from"./index-sIfte3Wo.js";import{getRouteFiles as w,buildRouteSource as S}from"./index-L3PkJo9p.js";import{f as u}from"./form-styles.module-BeYBGgWU.js";import{C as I,T as C,M as E}from"./index-6w301P4C.js";import{b as N}from"./index.esm-C0T0CRtE.js";var f;(t=>{t.FragmentDescriptionLookup={kill:[{description:"Kill a monster, certain bosses unlock waypoints",parameters:[{name:"text",description:"Text to display"}]}],arena:[{description:"Sub-areas inside true areas",parameters:[{name:"text",description:"Text to display"}]}],area:[{description:"Lookup an area",parameters:[{name:"area_id",description:"Area Id used internally by Path Of Exile"}]}],enter:[{description:"Enter an area",parameters:[{name:"area_id",description:"Area Id used internally by Path Of Exile"}]}],logout:[{description:"Logout or Exit to Character Selection, removes portals",parameters:[]}],waypoint:[{description:"A waypoint",parameters:[]},{description:"Use a waypoint to travel to a destination area",parameters:[{name:"area_id",description:"Destination area Id"}]}],waypoint_get:[{description:"Activate the waypoint in the current area",parameters:[]}],portal:[{description:"Set or use a Town Portal",parameters:[{name:"action",description:"set or use"}]}],quest:[{description:"Complete a quest, optionally specifying reward offer ids",parameters:[{name:"quest_id",description:"Quest Id used internally by Path Of Exile"}]}],quest_text:[{description:"Highlighted quest instruction text",parameters:[{name:"text",description:"Text to display"}]}],generic:[{description:"Generic text",parameters:[{name:"text",description:"Text to display"}]}],league:[{description:"A league mechanic interaction â€” renders with a distinct highlight colour",parameters:[{name:"text",description:"League mechanic name or instruction"}]}],reward_quest:[{description:"Quest rewards a player should take",parameters:[{name:"text",description:"Text to display"}]}],reward_vendor:[{description:"Vendor rewards a player should buy",parameters:[{name:"text",description:"Text to display"},{name:"cost",description:"Currency cost, wisdom/transmutation/alteration/chance/alchemy"}]}],trial:[{description:"Complete the ascendancy trial in the current area",parameters:[]}],ascend:[{description:"Complete The Lord's Labyrinth",parameters:[{name:"version",description:"Version to complete, normal/cruel/merciless/eternal"}]}],crafting:[{description:"Get the crafting recipe in the current area",parameters:[]}],dir:[{description:"A direction",parameters:[{name:"number",description:"Number of degrees in multiples of 45, where 0 = Up"}]}],copy:[{description:"One click copy",parameters:[{name:"text",description:"Text to copy"}]}]}})(f||(f={}));const T="_selectList_304tp_1",F="_selectListItem_304tp_16",O="_selected_304tp_21",x={selectList:T,selectListItem:F,selected:O};function q({items:t,selectedIndex:r,getLabel:m,onSelect:n}){return e.jsx("div",{className:l(x.selectList),children:t.map((s,a)=>e.jsx("div",{className:l(L.itemRound,x.selectListItem,{[R.hoverPrimary]:r!==a,[x.selected]:r===a}),onClick:()=>{n(a)},children:m(a)},a))})}const A="_workspace_1b1ja_1",P={workspace:A},$={preProcessors:{pattern:/#section *(.*)|#endif|#ifdef *(.*)|#ifndef *(.*)/,inside:{"keyword control-flow":/#\w+/,variable:/.+/}},subStep:{alias:"keyword control-flow",pattern:/#sub/},comment:/#.*/,fragment:{pattern:/\{.*?\}|\{.*\}?/,inside:{keyword:{pattern:/(\{)[^|{}]+/,lookbehind:!0},"keyword control-flow":/[|{}]/,property:/.+/}}};function D({workingFiles:t,isDirty:r,onUpdate:m}){const n=d.useRef(null),[s,a]=d.useState(0);return d.useEffect(()=>{s>=t.length&&a(0)},[t]),d.useEffect(()=>{n.current!==null&&n.current.scrollTo(0,0)},[s,n]),e.jsx("div",{className:l(P.workspace),children:s<t.length&&e.jsxs(e.Fragment,{children:[e.jsx(q,{items:t,selectedIndex:s,onSelect:a,getLabel:o=>{const i=t[o];return r(i,o)?i.name+"*":i.name}}),e.jsx(I,{ref:n,grammar:$,value:t[s].contents,onValueChange:o=>{const i=[...t];i[s].contents=o,m(i)}})]})})}const B="_editorForm_1knwi_1",G="_help_1knwi_5",b={editorForm:B,help:G};function k(t){return t.map(r=>({...r}))}const U=[t=>{const r=/pastebin\.com\/(.+)$/.exec(t);return r?`pastebin.com/raw/${r[1]}`:null}];function V({routeFiles:t,onSubmit:r,onReset:m}){const[n,s]=d.useState([]),[a,o]=d.useState(!1),[i,y]=d.useState(!1);d.useEffect(()=>{s(k(t))},[t]);const g=()=>{r(w(n.map(c=>c.contents)))};return d.useEffect(()=>{const c=p=>{(p.metaKey||p.ctrlKey)&&p.key==="s"&&(p.preventDefault(),g())};return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[n]),e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"large",label:"Import Route",isOpen:a,onRequestClose:()=>o(!1),onSubmit:c=>j.promise(async()=>{if(!c)return;const p=await v(c,U),_=w([p]);r(_)},{pending:"Importing Route",success:"Import Success",error:"Import Failed"})}),e.jsx(E,{size:"large",isOpen:i,onRequestClose:()=>y(!1),children:e.jsx(W,{})}),e.jsxs("div",{className:l(u.form,b.editorForm),children:[e.jsx(D,{workingFiles:n,isDirty:(c,p)=>p<t.length&&t[p].contents!==c.contents,onUpdate:s}),e.jsxs("div",{className:l(u.groupRight),children:[e.jsx(N,{size:24,onClick:()=>{y(!0)}}),e.jsx("button",{className:l(u.formButton),onClick:()=>{const c=S(n);navigator.clipboard.writeText(c),j.success("Exported to Clipboard")},children:"Export"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{o(!0)},children:"Import"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{s(k(t)),m()},children:"Reset"}),e.jsx("button",{className:l(u.formButton),onClick:()=>{g()},children:"Save"})]})]}),e.jsx("hr",{})]})}function W(){const t=Object.entries(f.FragmentDescriptionLookup).map(([r,m],n)=>e.jsx(h.Fragment,{children:m.map((s,a)=>e.jsxs(h.Fragment,{children:[n!==0&&e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("span",{className:"token keyword control-flow",children:"{"}),e.jsx("span",{className:"token keyword",children:r}),s.parameters.map((o,i)=>e.jsxs(h.Fragment,{children:[e.jsx("span",{className:"token keyword control-flow",children:"|"}),e.jsx("span",{className:"token property",children:o.name})]},`variant-parameters-${i}`)),e.jsx("span",{className:"token keyword control-flow",children:"}"}),e.jsx("br",{}),e.jsx("span",{children:s.description}),e.jsx("br",{}),s.parameters.map((o,i)=>e.jsxs(h.Fragment,{children:[e.jsx("span",{className:"token property",children:o.name}),":"," ",o.description,e.jsx("br",{})]},`variant-description-${i}`))]})]},`variant-${a}`))},r));return e.jsx("div",{className:l(b.help),children:h.Children.toArray(t)})}export{V as R};
